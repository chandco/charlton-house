jQuery(document).ready(function(e){var i,s={settings:{theWindow:e(window),modBgSize:Modernizr.backgroundsize,modHistory:Modernizr.history,localStore:Modernizr.localstorage,modRetina:1==e("html").hasClass("highresdisplay")?!0:!1,ie8:1==e("html").hasClass("ie8")?!0:!1,mobile:1==jQuery.browser.mobile?!0:!1,flyoutMenu:e(".flyout-menu"),flexSlider:e(".flexslider"),fullScreenSlider:e(".fullscreenslider"),newsSlider:e(".newsslider"),csrSlider:e(".csrslider"),singleSlider:e(".singleslider"),footerSlider:e(".footerslider"),logoDesktop:e(".logo-desktop").find("a"),footer:e("footer"),storiesAccordions:e(".stories-accordions"),blogIndexPosts:e(".blog-index-posts"),authorBox:e(".author-box"),scrollSpeed:1e3,fadeSpeed:1200,easeType:"easeInOutExpo"},init:function(){i=this.settings,this.generic(),i.flyoutMenu.length&&this.flyoutmenu(),i.flexSlider.length&&this.slideshow()},generic:function(){function s(){i.theWindow.scrollTop()>=45?i.logoDesktop.addClass("up"):i.logoDesktop.removeClass("up")}e(".navbar-collapse").on("show.bs.collapse",function(){e(".navbar-toggle").addClass("open")}),e(".navbar-collapse").on("hide.bs.collapse",function(){e(".navbar-toggle").removeClass("open")}),i.mobile&&e(".collapse").on("shown.bs.collapse",function(){var i=e(this).parent();e("html, body").animate({scrollTop:i.offset().top},400)}),s(),i.theWindow.scroll(function(){s()}),e("body.home").length&&e("#charlton-navbar-collapse").visualNav({selectedClass:"active",contentClass:"home-section"})},flyoutmenu:function(){var s=i.flyoutMenu,l=i.flyoutMenu.find(".flyout-trigger"),t=e("<div class='flyout-overlay'>&nbsp;</div>");l.click(function(e){e.preventDefault(),t.insertBefore(s),s.hasClass("open")?t.fadeOut(function(){t.remove()}):t.fadeIn(function(){t.on("click",function(){t.fadeOut(function(){t.remove(),s.toggleClass("open")})})}),s.toggleClass("open")})},slideshow:function(){if(i.fullScreenSlider.length){e("<ul class='custom-controls'></ul>").insertAfter(i.fullScreenSlider.parent());var s=i.fullScreenSlider.find(".slides li").length;s>1&&i.fullScreenSlider.find(".slides li").each(function(){var i=e(this).index()+1;e(".custom-controls").append("<li><a href='#'>"+i+"</a></li>")}),i.fullScreenSlider.flexslider({animation:"fade",controlNav:s>1?!0:!1,directionNav:s>1?!0:!1,manualControls:".custom-controls li a",slideshowSpeed:7e3,animationSpeed:i.fadeSpeed})}if(i.newsSlider.length&&(i.newsSlider.flexslider({animation:"slide",easing:i.easeType,animationLoop:!0,slideshow:!1,controlNav:!1,itemWidth:294,maxItems:3,minItems:1,itemMargin:0,prevText:"",nextText:"",reverse:!1,start:function(){e(".newsslider a").css({"line-height":e(".newsslider").height()+"px"}),i.newsSlider.flexslider("prev")}}),i.theWindow.resize(function(){var s=e(this).width(),l=i.newsSlider.data("flexslider"),t=i.newsSlider.width();switch(!0){case s>=960:l.vars.maxItems=3,l.vars.itemWidth=t/l.vars.maxItems;break;case s>=768&&960>s:l.vars.maxItems=3,l.vars.itemWidth=t/l.vars.maxItems;break;case s>=480&&768>s:l.vars.maxItems=2,l.vars.itemWidth=t/l.vars.maxItems;break;case 480>s:l.vars.maxItems=1,l.vars.itemWidth=t/l.vars.maxItems}l.flexAnimate(0),l.update()}).trigger("resize")),i.csrSlider.length&&(i.csrSlider.flexslider({animation:"slide",easing:i.easeType,animationLoop:!0,slideshow:!1,controlNav:!1,directionNav:!0,itemWidth:290,itemMargin:40,maxItems:3,minItems:1,prevText:"",nextText:""}),i.theWindow.resize(function(){var s=e(this).width(),l=i.csrSlider.data("flexslider"),t=i.csrSlider.width()-80;switch(!0){case s>=960:l.vars.maxItems=3,l.vars.itemWidth=t/l.vars.maxItems;break;case s>=480&&960>s:l.vars.maxItems=2,l.vars.itemWidth=t/l.vars.maxItems;break;case 480>s:l.vars.maxItems=1,l.vars.itemWidth=t/l.vars.maxItems}l.flexAnimate(0),l.update()}).trigger("resize")),i.singleSlider.length){var l=i.singleSlider.find(".slides li").length;i.singleSlider.flexslider({animation:"fade",controlNav:l>1?!0:!1,directionNav:l>1?!0:!1,slideshowSpeed:7e3,animationSpeed:i.fadeSpeed})}if(i.footerSlider.length){var t=i.footer.find(".slides li:first-child").data("bgcolor");(""!=t||"undefined"!=firstbgcolor)&&i.footer.css({"background-color":""+t}),i.footerSlider.flexslider({animation:"fade",controlNav:!1,directionNav:!1,slideshowSpeed:7e3,animationSpeed:i.fadeSpeed,selector:".slides > li",before:function(){var e=i.footerSlider.find(".flex-active-slide").next();0==e.length&&(e=i.footerSlider.find("li:first"));var s=e.data("bgcolor");i.footer.animate({backgroundColor:""+s},600)}})}},globalresize:function(){if(i.blogIndexPosts.length){var s=i.blogIndexPosts.find(".summary");s.each(function(){var i=e(this).find(".blog-summary-link img").height(),s=e(this).find(".excerpt-wrapper");s.css({height:i+"px"})})}e(".newsslider a").css({"line-height":e(".newsslider").height()+"px"})}};s.init(),e(window).resize(function(){s.globalresize()}).trigger("resize");var l={gallery:{type:"image",delegate:"a",gallery:{enabled:!0},removalDelay:300,mainClass:"mfp-fade"},clients:{type:"inline",delegate:"li",gallery:{enabled:!0},removalDelay:300,mainClass:"mfp-fade",midClick:!0}};e("div.gallery").exists(function(){e(this).magnificPopup(l.gallery)}),e("ul.clients-gallery.popup").exists(function(){e(this).magnificPopup(l.clients)})});